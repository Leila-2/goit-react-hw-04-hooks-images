{"version":3,"sources":["components/ImageGalleryItem/ImageGalleryItem.module.css","components/Modal/Modal.module.css","components/Button/Button.module.css","components/Searchbar/Searchbar.js","components/Loader/LoaderComp.js","components/Button/Button.js","components/Modal/Modal.js","components/ImageGalleryItem/ImageGalleryItem.js","servises/api.js","components/ImageGallery/ImageGallery.js","components/App/App.js","index.js","components/Searchbar/Searchbar.module.css","components/ImageGallery/ImageGallery.module.css"],"names":["module","exports","Searchbar","state","value","onChange","e","setState","currentTarget","toLowerCase","handleSubmit","event","preventDefault","props","onSubmit","trim","toast","position","autoClose","hideProgressBar","closeOnClick","pauseOnHover","draggable","progress","undefined","className","s","SearchForm","this","type","Button","ButtonLabel","Input","autoComplete","autoFocus","placeholder","Component","LoaderComponent","color","height","width","timeout","Loader","onClick","modalRoot","document","querySelector","Modal","closeHandler","code","console","log","onClose","backdropHandler","target","window","addEventListener","removeEventListener","createPortal","Overlay","src","url","alt","ImageGalleryItem","showModal","toggleModal","webformatURL","id","largeImageURL","ItemImage","api","fetchImg","page","fetch","then","response","ok","json","data","hits","ImageGallery","imgInfo","error","status","loadMore","prevState","prevProps","newValue","oldValue","newPage","prevPage","imgFinder","length","Error","Promise","reject","catch","message","map","App","handleFormSubmit","ReactDOM","render","StrictMode","getElementById"],"mappings":"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","file":"static/js/main.3030a4a8.chunk.js","sourcesContent":["// extracted by mini-css-extract-plugin\nmodule.exports = {\"ImageGalleryItem\":\"ImageGalleryItem_ImageGalleryItem__3CvRl\",\"ItemImage\":\"ImageGalleryItem_ItemImage__2xlls\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"Overlay\":\"Modal_Overlay__2AxMb\",\"Modal\":\"Modal_Modal__2WBTT\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"Button\":\"Button_Button__3R1xi\"};","import s from \"./Searchbar.module.css\";\nimport React, { Component } from \"react\";\nimport { toast } from \"react-toastify\";\n\nclass Searchbar extends Component {\n  state = {\n    value: \"\",\n  };\n\n  onChange = (e) => {\n    this.setState({ value: e.currentTarget.value.toLowerCase() });\n  };\n\n  handleSubmit = (event) => {\n    event.preventDefault();\n    this.props.onSubmit(this.state.value);\n    this.setState({ value: \"\" });\n    if (this.state.value.trim() === \"\") {\n      toast(\"Введите тему для картинки :)\", {\n        position: \"top-right\",\n        autoClose: 5000,\n        hideProgressBar: false,\n        closeOnClick: true,\n        pauseOnHover: true,\n        draggable: true,\n        progress: undefined,\n      });\n      return;\n    }\n  };\n\n  render() {\n    return (\n      <header className={s.Searchbar}>\n        <form className={s.SearchForm} onSubmit={this.handleSubmit}>\n          <button type=\"submit\" className={s.Button}>\n            <span className={s.ButtonLabel}>Search</span>\n          </button>\n\n          <input\n            className={s.Input}\n            type=\"text\"\n            autoComplete=\"off\"\n            autoFocus\n            placeholder=\"Search images and photos\"\n            onChange={this.onChange}\n            value={this.state.value}\n          />\n        </form>\n      </header>\n    );\n  }\n}\nexport default Searchbar;\n","import React from \"react\";\nimport Loader from \"react-loader-spinner\";\nimport \"react-loader-spinner/dist/loader/css/react-spinner-loader.css\";\nimport s from \"../ImageGallery/ImageGallery.module.css\";\n\nexport default function LoaderComponent(props) {\n  return (\n    <Loader\n      type=\"Puff\"\n      color=\"#00BFFF\"\n      height={80}\n      width={80}\n      timeout={3000}\n      className={s.Loader}\n    />\n  );\n}\n","import React from \"react\";\nimport s from \"./Button.module.css\";\n\nexport default function Button({ onClick }) {\n  return (\n    <button className={s.Button} type=\"button\" onClick={onClick}>\n      Load more\n    </button>\n  );\n}\n","import React, { Component } from \"react\";\nimport { createPortal } from \"react-dom\";\nimport s from \"./Modal.module.css\";\n\nconst modalRoot = document.querySelector(\"#modal-root\");\nexport default class Modal extends Component {\n  componentDidMount() {\n    window.addEventListener(\"keydown\", this.closeHandler);\n  }\n\n  componentWillUnmount() {\n    window.removeEventListener(\"keydown\", this.closeHandler);\n  }\n\n  closeHandler = (e) => {\n    if (e.code === \"Escape\") {\n      console.log(\"ESC :)\");\n      this.props.onClose();\n    }\n  };\n\n  backdropHandler = (event) => {\n    if (event.currentTarget === event.target) {\n      this.props.onClose();\n    }\n  };\n\n  render() {\n    return createPortal(\n      <div className={s.Overlay} onClick={this.backdropHandler}>\n        <div className={s.Modal}>\n          <img src={this.props.url} alt=\"\" />\n        </div>\n      </div>,\n      modalRoot\n    );\n  }\n}\n","import React, { Component } from \"react\";\nimport s from \"./ImageGalleryItem.module.css\";\n\nimport Modal from \"../Modal/Modal\";\nclass ImageGalleryItem extends Component {\n  state = {\n    showModal: false,\n  };\n\n  toggleModal = () => {\n    this.setState(({ showModal }) => ({\n      showModal: !showModal,\n    }));\n  };\n\n  render() {\n    const showModal = this.state.showModal;\n    const toggleModal = this.toggleModal;\n    const { webformatURL, id, largeImageURL } = this.props;\n\n    return (\n      <>\n        <li key={id} className={s.ImageGalleryItem} onClick={toggleModal}>\n          <img className={s.ItemImage} src={webformatURL} alt=\"\" />\n        </li>\n        {showModal && <Modal onClose={toggleModal} url={largeImageURL} />}\n      </>\n    );\n  }\n}\nexport default ImageGalleryItem;\n","function fetchImg(value, page) {\n  const key = `23558220-fb5623a2d9636919de7621278`;\n  let url = `https://pixabay.com/api/?q=${value}&page=${page}&key=${key}&image_type=photo&orientation=horizontal&per_page=12`;\n\n  return fetch(url)\n    .then((response) => {\n      if (response.ok) {\n        return response.json();\n      }\n    })\n    .then((data) => {\n      return data.hits;\n    });\n}\nconst api = {\n  fetchImg,\n};\nexport default api;\n","import React, { Component } from \"react\";\nimport s from \"./ImageGallery.module.css\";\nimport Loader from \"../Loader/LoaderComp\";\nimport Button from \"../Button/Button\";\n\nimport { ToastContainer } from \"react-toastify\";\nimport ImageGalleryItem from \"../ImageGalleryItem/ImageGalleryItem\";\nimport \"react-toastify/dist/ReactToastify.css\";\nimport imgFinder from \"../../servises/api\";\nexport default class ImageGallery extends Component {\n  state = {\n    imgInfo: null,\n    error: null,\n    page: 1,\n    status: \"idle\",\n  };\n\n  componentDidUpdate(prevProps, prevState) {\n    const newValue = this.props.value;\n    const oldValue = prevProps.value;\n    const newPage = this.state.page;\n    const prevPage = prevState.page;\n\n    if (oldValue !== newValue) {\n      this.setState({ status: \"pending\" });\n      imgFinder\n        .fetchImg(newValue, newPage)\n\n        .then((imgInfo) => {\n          if (imgInfo.length === 0) {\n            this.setState({ status: \"rejected\", error: new Error() });\n            return Promise.reject(new Error(`Нет фото на тему ${newValue}`));\n          }\n          this.setState({ imgInfo, status: \"resolved\" });\n        })\n\n        .catch((error) => this.setState({ error }));\n    }\n\n    if (prevPage !== newPage) {\n      imgFinder\n        .fetchImg(newValue, newPage)\n        .then((imgInfo) => {\n          if (imgInfo.length === 0) {\n            this.setState({ status: \"rejected\", error: new Error() });\n            return Promise.reject(new Error(`Нет фото на тему ${newValue}`));\n          }\n          this.setState((prevState) => ({\n            imgInfo: [...prevState.imgInfo, ...imgInfo],\n            status: \"resolved\",\n          }));\n        })\n\n        .catch((error) => this.setState({ error }));\n    }\n  }\n\n  loadMore = () => {\n    this.setState((prevState) => ({ page: prevState.page + 1 }));\n  };\n\n  render() {\n    const { status, imgInfo, error } = this.state;\n\n    if (status === \"idle\") {\n      return <ToastContainer position=\"top-right\" autoClose={5000} />;\n    }\n\n    if (status === \"pending\") {\n      return <Loader />;\n    }\n\n    if (status === \"rejected\") {\n      return <p>{error.message}</p>;\n    }\n\n    if (status === \"resolved\") {\n      return (\n        <>\n          <ul className={s.ImageGallery}>\n            {imgInfo.map(({ webformatURL, id, largeImageURL }) => (\n              <ImageGalleryItem\n                webformatURL={webformatURL}\n                key={id}\n                largeImageURL={largeImageURL}\n              />\n            ))}\n          </ul>\n\n          <Button onClick={this.loadMore} />\n        </>\n      );\n    }\n  }\n}\n","import React, { Component } from \"react\";\nimport Searchbar from \"../Searchbar/Searchbar\";\nimport ImageGallery from \"../ImageGallery/ImageGallery\";\n\nclass App extends Component {\n  state = {\n    showModal: false,\n    value: \"\",\n  };\n  toggleModal = () => {\n    this.setState(({ showModal }) => ({\n      showModal: !showModal,\n    }));\n  };\n  handleFormSubmit = (value) => {\n    console.log(value);\n    this.setState({ value: value });\n  };\n  render() {\n    const handleFormSubmit = this.handleFormSubmit;\n    return (\n      <div className=\"App\">\n        <Searchbar onSubmit={handleFormSubmit} />\n        <ImageGallery value={this.state.value} />\n      </div>\n    );\n  }\n}\n\nexport default App;\n","import React from \"react\";\nimport ReactDOM from \"react-dom\";\n\nimport App from \"../src/components/App/App\";\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById(\"root\")\n);\n","// extracted by mini-css-extract-plugin\nmodule.exports = {\"Searchbar\":\"Searchbar_Searchbar__DjWH3\",\"SearchForm\":\"Searchbar_SearchForm__1ac2l\",\"Button\":\"Searchbar_Button__257ni\",\"ButtonLabel\":\"Searchbar_ButtonLabel__2McP2\",\"Input\":\"Searchbar_Input__3SYi2\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"ImageGallery\":\"ImageGallery_ImageGallery__DncjJ\",\"Loader\":\"ImageGallery_Loader__3oSMo\",\"App\":\"ImageGallery_App__391bu\"};"],"sourceRoot":""}