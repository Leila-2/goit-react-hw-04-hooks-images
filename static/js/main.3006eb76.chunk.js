(this["webpackJsonpgoit-react-hw-04-hooks-images"]=this["webpackJsonpgoit-react-hw-04-hooks-images"]||[]).push([[0],{11:function(e,t,a){e.exports={ImageGalleryItem:"ImageGalleryItem_ImageGalleryItem__3CvRl",ItemImage:"ImageGalleryItem_ItemImage__2xlls"}},12:function(e,t,a){e.exports={Overlay:"Modal_Overlay__2AxMb",Modal:"Modal_Modal__2WBTT"}},15:function(e,t,a){e.exports={Button:"Button_Button__3R1xi"}},43:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),c=a(4),o=a.n(c),s=a(3),i=a(5),l=a.n(i),u=a(9),j=a(1);function b(e){var t=e.onSubmit,a=Object(n.useState)(""),r=Object(s.a)(a,2),c=r[0],o=r[1];return Object(j.jsx)("header",{className:l.a.Searchbar,children:Object(j.jsxs)("form",{className:l.a.SearchForm,onSubmit:function(e){e.preventDefault(),t(c),o(""),""!==c.trim()||Object(u.b)("\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u0442\u0435\u043c\u0443 \u0434\u043b\u044f \u043a\u0430\u0440\u0442\u0438\u043d\u043a\u0438 :)",{position:"top-right",autoClose:5e3,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,draggable:!0,progress:void 0})},children:[Object(j.jsx)("button",{type:"submit",className:l.a.Button,children:Object(j.jsx)("span",{className:l.a.ButtonLabel,children:"Search"})}),Object(j.jsx)("input",{className:l.a.Input,type:"text",autoComplete:"off",autoFocus:!0,placeholder:"Search images and photos",onChange:function(e){o(e.currentTarget.value.toLowerCase())},value:c})]})})}var m=a(13),d=a(8),h=a.n(d),f=a(14),O=a.n(f);a(41);function g(e){return Object(j.jsx)(O.a,{type:"Puff",color:"#00BFFF",height:80,width:80,timeout:3e3,className:h.a.Loader})}var p=a(15),_=a.n(p);function x(e){var t=e.onClick;return Object(j.jsx)("button",{className:_.a.Button,type:"button",onClick:t,children:"Load more"})}var v=a(11),I=a.n(v),S=a(12),y=a.n(S),w=document.querySelector("#modal-root");function L(e){var t=e.onClose,a=e.url;Object(n.useEffect)((function(){var e=function(e){"Escape"===e.code&&t()};return window.addEventListener("keydown",e),function(){window.removeEventListener("keydown",e)}}),[t]);return Object(c.createPortal)(Object(j.jsx)("div",{className:y.a.Overlay,onClick:function(e){e.currentTarget===e.target&&t()},children:Object(j.jsx)("div",{className:y.a.Modal,children:Object(j.jsx)("img",{src:a,alt:""})})}),w)}function k(e){var t=e.webformatURL,a=e.id,r=e.largeImageURL,c=Object(n.useState)(!1),o=Object(s.a)(c,2),i=o[0],l=o[1],u=function(){l(!i)};return Object(j.jsxs)(j.Fragment,{children:[Object(j.jsx)("li",{className:I.a.ImageGalleryItem,onClick:u,children:Object(j.jsx)("img",{className:I.a.ItemImage,src:t,alt:""})},a),i&&Object(j.jsx)(L,{onClose:u,url:r})]})}a(42);var B={fetchImg:function(e,t){var a="https://pixabay.com/api/?q=".concat(e,"&page=").concat(t,"&key=").concat("23558220-fb5623a2d9636919de7621278","&image_type=photo&orientation=horizontal&per_page=12");return fetch(a).then((function(e){if(e.ok)return e.json()})).then((function(e){return e.hits}))}};function C(e){var t=e.value,a=Object(n.useState)(null),r=Object(s.a)(a,2),c=r[0],o=r[1],i=Object(n.useState)(null),l=Object(s.a)(i,2),b=l[0],d=l[1],f=Object(n.useState)(1),O=Object(s.a)(f,2),p=O[0],_=O[1],v=Object(n.useState)("idle"),I=Object(s.a)(v,2),S=I[0],y=I[1];Object(n.useEffect)((function(){t&&(y("pending"),B.fetchImg(t,_).then((function(e){if(0===e.length)return y("rejected"),d(new Error),Promise.reject(new Error("\u041d\u0435\u0442 \u0444\u043e\u0442\u043e \u043d\u0430 \u0442\u0435\u043c\u0443 ".concat(t)));o(e),y("resolved")})).catch((function(e){return d(e)})))}),[t,p]),Object(n.useEffect)((function(){p||B.then((function(e){if(0===e.length)return y("rejected"),d(new Error),Promise.reject(new Error("\u041d\u0435\u0442 \u0444\u043e\u0442\u043e \u043d\u0430 \u0442\u0435\u043c\u0443 ".concat(t)));o((function(t){return[].concat(Object(m.a)(t),Object(m.a)(e))})),y("resolved")})).catch((function(e){return d(e)}))}),[t,p]);return"idle"===S?Object(j.jsx)(u.a,{position:"top-right",autoClose:5e3}):"pending"===S?Object(j.jsx)(g,{}):"rejected"===S?Object(j.jsx)("p",{children:b.message}):"resolved"===S?Object(j.jsxs)(j.Fragment,{children:[Object(j.jsx)("ul",{className:h.a.ImageGallery,children:c.map((function(e){var t=e.webformatURL,a=e.id,n=e.largeImageURL;return Object(j.jsx)(k,{webformatURL:t,largeImageURL:n},a)}))}),Object(j.jsx)(x,{onClick:function(){_(p+1)}})]}):void 0}function N(){var e=Object(n.useState)(""),t=Object(s.a)(e,2),a=t[0],r=t[1];return Object(j.jsxs)("div",{className:"App",children:[Object(j.jsx)(b,{onSubmit:function(e){r(e)}}),Object(j.jsx)(C,{value:a})]})}o.a.render(Object(j.jsx)(r.a.StrictMode,{children:Object(j.jsx)(N,{})}),document.getElementById("root"))},5:function(e,t,a){e.exports={Searchbar:"Searchbar_Searchbar__DjWH3",SearchForm:"Searchbar_SearchForm__1ac2l",Button:"Searchbar_Button__257ni",ButtonLabel:"Searchbar_ButtonLabel__2McP2",Input:"Searchbar_Input__3SYi2"}},8:function(e,t,a){e.exports={ImageGallery:"ImageGallery_ImageGallery__DncjJ",Loader:"ImageGallery_Loader__3oSMo",App:"ImageGallery_App__391bu"}}},[[43,1,2]]]);
//# sourceMappingURL=main.3006eb76.chunk.js.map