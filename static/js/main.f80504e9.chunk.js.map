{"version":3,"sources":["components/ImageGalleryItem/ImageGalleryItem.module.css","components/Modal/Modal.module.css","components/Button/Button.module.css","components/Searchbar/Searchbar.js","components/Loader/LoaderComp.js","components/Button/Button.js","components/Modal/Modal.js","components/ImageGalleryItem/ImageGalleryItem.js","servises/api.js","components/ImageGallery/ImageGallery.js","components/App/App.js","index.js","components/Searchbar/Searchbar.module.css","components/ImageGallery/ImageGallery.module.css"],"names":["module","exports","Searchbar","onSubmit","useState","value","setValue","className","s","SearchForm","event","preventDefault","trim","toast","position","autoClose","hideProgressBar","closeOnClick","pauseOnHover","draggable","progress","undefined","type","Button","ButtonLabel","Input","autoComplete","autoFocus","placeholder","onChange","e","currentTarget","toLowerCase","LoaderComponent","props","color","height","width","timeout","Loader","onClick","modalRoot","document","querySelector","Modal","onClose","url","useEffect","closeHandler","code","window","addEventListener","removeEventListener","createPortal","Overlay","target","src","alt","ImageGalleryItem","webformatURL","id","largeImageURL","showModal","setShowModal","toggleModal","ItemImage","api","fetchImg","page","fetch","then","response","ok","json","data","hits","ImageGallery","imgInfo","setImgInfo","error","setError","setPage","status","setStatus","imgFinder","length","Error","Promise","reject","catch","prevImg","message","map","prev","App","ReactDOM","render","StrictMode","getElementById"],"mappings":"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","file":"static/js/main.f80504e9.chunk.js","sourcesContent":["// extracted by mini-css-extract-plugin\nmodule.exports = {\"ImageGalleryItem\":\"ImageGalleryItem_ImageGalleryItem__3CvRl\",\"ItemImage\":\"ImageGalleryItem_ItemImage__2xlls\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"Overlay\":\"Modal_Overlay__2AxMb\",\"Modal\":\"Modal_Modal__2WBTT\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"Button\":\"Button_Button__3R1xi\"};","import s from \"./Searchbar.module.css\";\nimport React, { useState } from \"react\";\nimport { toast } from \"react-toastify\";\n\nexport default function Searchbar({ onSubmit }) {\n  const [value, setValue] = useState(\"\")\n\n\n  const onChange = (e) => {\n    setValue(e.currentTarget.value.toLowerCase());\n  };\n\n  const handleSubmit = (event) => {\n    event.preventDefault();\n    onSubmit(value);\n    setValue(\"\");\n    if (value.trim() === \"\") {\n      toast(\"Введите тему для картинки :)\", {\n        position: \"top-right\",\n        autoClose: 5000,\n        hideProgressBar: false,\n        closeOnClick: true,\n        pauseOnHover: true,\n        draggable: true,\n        progress: undefined,\n      });\n      return;\n    }\n  };\n\n\n  return (\n    <header className={s.Searchbar}>\n      <form className={s.SearchForm} onSubmit={handleSubmit}>\n        <button type=\"submit\" className={s.Button}>\n          <span className={s.ButtonLabel}>Search</span>\n        </button>\n\n        <input\n          className={s.Input}\n          type=\"text\"\n          autoComplete=\"off\"\n          autoFocus\n          placeholder=\"Search images and photos\"\n          onChange={onChange}\n          value={value}\n        />\n      </form>\n    </header>\n  );\n}\n\n\n","import React from \"react\";\nimport Loader from \"react-loader-spinner\";\nimport \"react-loader-spinner/dist/loader/css/react-spinner-loader.css\";\nimport s from \"../ImageGallery/ImageGallery.module.css\";\n\nexport default function LoaderComponent(props) {\n  return (\n    <Loader\n      type=\"Puff\"\n      color=\"#00BFFF\"\n      height={80}\n      width={80}\n      timeout={3000}\n      className={s.Loader}\n    />\n  );\n}\n","import React from \"react\";\nimport s from \"./Button.module.css\";\n\nexport default function Button({ onClick }) {\n  return (\n    <button className={s.Button} type=\"button\" onClick={onClick}>\n      Load more\n    </button>\n  );\n}\n","import React, { useEffect } from \"react\";\nimport { createPortal } from \"react-dom\";\nimport s from \"./Modal.module.css\";\n\n// const modalRoot = document.querySelector(\"#modal-root\");\n// export default class Modal extends Component {\n//   componentDidMount() {\n//     window.addEventListener(\"keydown\", this.closeHandler);\n//   }\n\n//   componentWillUnmount() {\n//     window.removeEventListener(\"keydown\", this.closeHandler);\n//   }\n\n//   closeHandler = (e) => {\n//     if (e.code === \"Escape\") {\n//       console.log(\"ESC :)\");\n//       this.props.onClose();\n//     }\n//   };\n\n//   backdropHandler = (event) => {\n//     if (event.currentTarget === event.target) {\n//       this.props.onClose();\n//     }\n//   };\n\n//   render() {\n//     return createPortal(\n//       <div className={s.Overlay} onClick={this.backdropHandler}>\n//         <div className={s.Modal}>\n//           <img src={this.props.url} alt=\"\" />\n//         </div>\n//       </div>,\n//       modalRoot\n//     );\n//   }\n// }\n\nconst modalRoot = document.querySelector(\"#modal-root\");\n//console.log(modalRoot)\nexport default function Modal({ onClose, url }) {\n\n  useEffect(() => {\n    const closeHandler = (e) => {\n      if (e.code === \"Escape\") {\n        onClose();\n      }\n    };\n    window.addEventListener(\"keydown\", closeHandler);\n\n    return (() => { window.removeEventListener(\"keydown\", closeHandler) });\n  }, [onClose]);\n\n\n\n  const backdropHandler = (event) => {\n    if (event.currentTarget === event.target) {\n      onClose();\n    }\n  };\n\n\n  return createPortal(\n    <div className={s.Overlay} onClick={backdropHandler}>\n      <div className={s.Modal}>\n        <img src={url} alt=\"\" />\n      </div>\n    </div>,\n    modalRoot,\n  );\n}\n","import React, { useState } from \"react\";\nimport s from \"./ImageGalleryItem.module.css\";\nimport Modal from \"../Modal/Modal\";\n\nexport default function ImageGalleryItem({ webformatURL, id, largeImageURL }) {\n  const [showModal, setShowModal] = useState(false);\n\n\n  const toggleModal = () => {\n    setShowModal(!showModal);\n  };\n\n\n\n  return (\n    <>\n      <li\n        key={id}\n        className={s.ImageGalleryItem}\n        onClick={toggleModal}>\n        <img\n          className={s.ItemImage}\n          src={webformatURL}\n          alt=\"\" />\n      </li>\n      {showModal && <Modal onClose={toggleModal} url={largeImageURL} />}\n    </>\n  )\n}\n\n//export default ImageGalleryItem;\n","function fetchImg(value, page) {\n  const key = `23558220-fb5623a2d9636919de7621278`;\n  let url = `https://pixabay.com/api/?q=${value}&page=${page}&key=${key}&image_type=photo&orientation=horizontal&per_page=12`;\n\n  return fetch(url)\n    .then((response) => {\n      if (response.ok) {\n        return response.json();\n      }\n    })\n    .then((data) => {\n      return data.hits;\n    });\n}\nconst api = {\n  fetchImg,\n};\nexport default api;\n","import React, { useState, useEffect } from \"react\";\nimport s from \"./ImageGallery.module.css\";\nimport Loader from \"../Loader/LoaderComp\";\nimport Button from \"../Button/Button\";\n\nimport { ToastContainer } from \"react-toastify\";\nimport ImageGalleryItem from \"../ImageGalleryItem/ImageGalleryItem\";\nimport \"react-toastify/dist/ReactToastify.css\";\nimport imgFinder from \"../../servises/api\";\n\nexport default function ImageGallery({ value }) {\n  const [imgInfo, setImgInfo] = useState(null)\n  const [error, setError] = useState(null)\n  const [page, setPage] = useState(1)\n  const [status, setStatus] = useState(\"idle\")\n\n  useEffect(() => {\n    if (!value) {\n      return\n    }\n    setStatus(\"pending\")\n\n    imgFinder\n      .fetchImg(value, setPage)\n\n      .then((imgInfo) => {\n        if (imgInfo.length === 0) {\n          setStatus(\"rejected\")\n          setError(new Error())\n          return Promise.reject(new Error(`Нет фото на тему ${value}`));\n        }\n        setImgInfo(imgInfo)\n        setStatus(\"resolved\")\n      })\n\n      .catch((error) => setError(error));\n  }, [value])\n\n  useEffect(() => {\n    if (!page) {\n      imgFinder\n        .then((imgInfo) => {\n          if (imgInfo.length === 0) {\n            setStatus(\"rejected\")\n            setError(new Error())\n            return Promise.reject(new Error(`Нет фото на тему ${value}`));\n          }\n          setImgInfo(prevImg => [...prevImg, ...imgInfo])\n          setStatus(\"resolved\")\n\n        })\n\n        .catch((error) => setError(error));\n    }\n  }, [page, value])\n\n  // componentDidUpdate(prevProps, prevState) {\n  //   const newValue = this.props.value;\n  //   const oldValue = prevProps.value;\n  //   const newPage = this.state.page;\n  //  const prevPage = prevState.page;\n\n  //   if (oldValue !== newValue) {\n  //     this.setState({ status: \"pending\" });\n  //     imgFinder\n  //       .fetchImg(newValue, newPage)\n\n  //       .then((imgInfo) => {\n  //         if (imgInfo.length === 0) {\n  //           this.setState({ status: \"rejected\", error: new Error() });\n  //           return Promise.reject(new Error(`Нет фото на тему ${newValue}`));\n  //         }\n  //         this.setState({ imgInfo, status: \"resolved\" });\n  //       })\n\n  //       .catch((error) => this.setState({ error }));\n  //   }\n\n  //   if (prevPage !== newPage) {\n  //     imgFinder\n  //       .fetchImg(newValue, newPage)\n  //       .then((imgInfo) => {\n  //         if (imgInfo.length === 0) {\n  //           this.setState({ status: \"rejected\", error: new Error() });\n  //           return Promise.reject(new Error(`Нет фото на тему ${newValue}`));\n  //         }\n  //         this.setState((prevState) => ({\n  //           imgInfo: [...prevState.imgInfo, ...imgInfo],\n  //           status: \"resolved\",\n  //         }));\n  //       })\n\n  //       .catch((error) => this.setState({ error }));\n  //   }\n  // }\n\n  const loadMore = () => {\n    setPage(prev => prev + 1);\n  };\n\n\n  if (status === \"idle\") {\n    return <ToastContainer position=\"top-right\" autoClose={5000} />;\n  }\n\n  if (status === \"pending\") {\n    return <Loader />;\n  }\n\n  if (status === \"rejected\") {\n    return <p>{error.message}</p>;\n  }\n\n  if (status === \"resolved\") {\n    return (\n      <>\n        <ul className={s.ImageGallery}>\n          {imgInfo.map(({ webformatURL, id, largeImageURL }) => (\n            <ImageGalleryItem\n              webformatURL={webformatURL}\n              key={id}\n              largeImageURL={largeImageURL}\n            />\n          ))}\n        </ul>\n\n        <Button onClick={loadMore} />\n      </>\n    );\n  }\n}\n\n// export default class ImageGallery extends Component {\n//   state = {\n//     imgInfo: null,\n//     error: null,\n//     page: 1,\n//     status: \"idle\",\n//   };\n\n//   componentDidUpdate(prevProps, prevState) {\n//     const newValue = this.props.value;\n//     const oldValue = prevProps.value;\n//     const newPage = this.state.page;\n//     const prevPage = prevState.page;\n\n//     if (oldValue !== newValue) {\n//       this.setState({ status: \"pending\" });\n//       imgFinder\n//         .fetchImg(newValue, newPage)\n\n//         .then((imgInfo) => {\n//           if (imgInfo.length === 0) {\n//             this.setState({ status: \"rejected\", error: new Error() });\n//             return Promise.reject(new Error(`Нет фото на тему ${newValue}`));\n//           }\n//           this.setState({ imgInfo, status: \"resolved\" });\n//         })\n\n//         .catch((error) => this.setState({ error }));\n//     }\n\n//     if (prevPage !== newPage) {\n//       imgFinder\n//         .fetchImg(newValue, newPage)\n//         .then((imgInfo) => {\n//           if (imgInfo.length === 0) {\n//             this.setState({ status: \"rejected\", error: new Error() });\n//             return Promise.reject(new Error(`Нет фото на тему ${newValue}`));\n//           }\n//           this.setState((prevState) => ({\n//             imgInfo: [...prevState.imgInfo, ...imgInfo],\n//             status: \"resolved\",\n//           }));\n//         })\n\n//         .catch((error) => this.setState({ error }));\n//     }\n//   }\n\n//   loadMore = () => {\n//     this.setState((prevState) => ({ page: prevState.page + 1 }));\n//   };\n\n//   render() {\n//     const { status, imgInfo, error } = this.state;\n\n//     if (status === \"idle\") {\n//       return <ToastContainer position=\"top-right\" autoClose={5000} />;\n//     }\n\n//     if (status === \"pending\") {\n//       return <Loader />;\n//     }\n\n//     if (status === \"rejected\") {\n//       return <p>{error.message}</p>;\n//     }\n\n//     if (status === \"resolved\") {\n//       return (\n//         <>\n//           <ul className={s.ImageGallery}>\n//             {imgInfo.map(({ webformatURL, id, largeImageURL }) => (\n//               <ImageGalleryItem\n//                 webformatURL={webformatURL}\n//                 key={id}\n//                 largeImageURL={largeImageURL}\n//               />\n//             ))}\n//           </ul>\n\n//           <Button onClick={this.loadMore} />\n//         </>\n//       );\n//     }\n//   }\n// }\n","import React, { useState } from \"react\";\nimport Searchbar from \"../Searchbar/Searchbar\";\nimport ImageGallery from \"../ImageGallery/ImageGallery\";\n\nexport default function App() {\n  const [value, setValue] = useState(\"\")\n\n  const handleFormSubmit = (value) => {\n    setValue(value);\n  };\n\n  return (\n    <div className=\"App\">\n      <Searchbar onSubmit={handleFormSubmit} />\n      <ImageGallery value={value} />\n    </div>\n  );\n\n}\n\n","import React from \"react\";\nimport ReactDOM from \"react-dom\";\n\nimport App from \"../src/components/App/App\";\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById(\"root\")\n);\n","// extracted by mini-css-extract-plugin\nmodule.exports = {\"Searchbar\":\"Searchbar_Searchbar__DjWH3\",\"SearchForm\":\"Searchbar_SearchForm__1ac2l\",\"Button\":\"Searchbar_Button__257ni\",\"ButtonLabel\":\"Searchbar_ButtonLabel__2McP2\",\"Input\":\"Searchbar_Input__3SYi2\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"ImageGallery\":\"ImageGallery_ImageGallery__DncjJ\",\"Loader\":\"ImageGallery_Loader__3oSMo\",\"App\":\"ImageGallery_App__391bu\"};"],"sourceRoot":""}